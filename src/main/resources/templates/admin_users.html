<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
  <meta charset="UTF-8">
  <title>ê´€ë¦¬ì í˜ì´ì§€ - ì‚¬ìš©ì ê´€ë¦¬</title>
  <style>
    body { font-family: 'Segoe UI', sans-serif; background: #f7f8fa; margin:0; padding:0; color:#333; }
    header { background: #3b82f6; color: white; padding: 1rem 2rem; display:flex; justify-content: space-between; align-items:center; }
    main { padding:2rem; }
    table { width:100%; border-collapse: collapse; margin-top:1rem; background:white; border-radius:8px; overflow:hidden; }
    th, td { padding:0.8rem 1rem; text-align:left; border-bottom:1px solid #ddd; }
    th { background:#e0e7ff; }
    /* ì…ë ¥ í•„ë“œê°€ ì…€ ë„ˆë¹„ë¥¼ ì°¨ì§€í•˜ë„ë¡ ì„¤ì • */
    input[type="text"], input[type="password"], select {
      width: 100%;
      padding: 0.4rem;
      border-radius: 4px;
      border: 1px solid #ccc;
      box-sizing: border-box;
    }
    .btn { padding:0.4rem 0.8rem; border:none; border-radius:4px; cursor:pointer; }
    .btn-save { background:#3b82f6; color:white; }
    .btn-delete { background:#ef4444; color:white; }
    .btn:hover { opacity:0.9; }
    /* í¼ êµ¬ì¡°ë¥¼ í…Œì´ë¸” ì…€ì— ë§ê²Œ ì¡°ì • */
    /* display:contentsëŠ” í¼ì´ td êµ¬ì¡°ë¥¼ ê¹¨ì§€ ì•Šë„ë¡ í•˜ì§€ë§Œ,
       ë¸Œë¼ìš°ì € í˜¸í™˜ì„± ë¬¸ì œë‚˜ ë ˆì´ì•„ì›ƒ ë¬¸ì œë¥¼ ì¼ìœ¼í‚¬ ìˆ˜ ìˆì–´
       ì—¬ê¸°ì„œëŠ” ì¸ë¼ì¸ í¼ ìŠ¤íƒ€ì¼ì„ ìœ ì§€í•˜ê³  divë§Œ ìˆ˜ì •í–ˆìŠµë‹ˆë‹¤. */
    .action-cell { display:flex; gap:0.5rem; }
  </style>
</head>
<body>
<header>
  <h1>ê´€ë¦¬ì í˜ì´ì§€ - ì‚¬ìš©ì ê´€ë¦¬</h1>
  <nav>
    <a th:href="@{/main}" style="color:white; text-decoration:none; margin-right: 15px;">ë©”ì¸</a>
    <a th:href="@{/admin/teams}" style="color:white; text-decoration:none;">íŒ€ ê´€ë¦¬</a>
  </nav>
</header>
<main>
  <table>
    <thead>
    <tr>
      <th>ì´ë¦„</th>
      <th>ì‚¬ìš©ìëª…</th>
      <th>ìƒˆ ë¹„ë°€ë²ˆí˜¸</th>
      <th>ì—­í• </th>
      <th style="width: 150px;">ì‘ì—…</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="user : ${users}">
      <form th:action="@{/admin/users/update}" method="post">

        <input type="hidden" th:name="userId" th:value="${user.id}" />

        <td>
          <input type="text" th:name="name" th:value="${user.name}" required />
        </td>

        <td>
          <input type="text" th:name="username" th:value="${user.username}" required />
        </td>

        <td>
          <input type="password" th:name="password" placeholder="ìƒˆ ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ (ìƒëµ ê°€ëŠ¥)" />
        </td>

        <td>
          <select th:name="role">
            <option th:value="ROLE_USER" th:selected="${user.role.name() == 'ROLE_USER'}">USER</option>
            <option th:value="ROLE_ADMIN" th:selected="${user.role.name() == 'ROLE_ADMIN'}">ADMIN</option>
          </select>
        </td>

        <td>
          <div class="action-cell">
            <button type="submit" class="btn btn-save">ğŸ’¾ ì €ì¥</button>
      </form>
      <form th:action="@{/admin/users/delete}" method="post">
        <input type="hidden" th:name="userId" th:value="${user.id}" />
        <button type="submit" class="btn btn-delete" onclick="return confirm('ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? í•´ë‹¹ ì‚¬ìš©ìì˜ íŒ€ì¥ ì •ë³´ ë° ì œì¶œ ê¸°ë¡ì´ ì˜í–¥ì„ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.');">ğŸ—‘ ì‚­ì œ</button>
      </form>
      </div>
      </td>
    </tr>
    </tbody>
  </table>
</main>
</body>
</html>